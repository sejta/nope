```
 _   _  ____  ____  _____
| \ | |/ __ \|  _ \|  ___|
|  \| | |  | | |_) | |__  
| . ` | |  | |  __/|  __|
| |\  | |__| | |   | |___
|_| \_|\____/|_|   |_____|
```

# nope

**nope** — минималистичный Go app‑kit для HTTP‑сервисов.

Предсказуемый runtime, строгий JSON, продуктовые ошибки, собственный простой роутинг и тонкая работа с БД — без магии, DI и платформенной избыточности.

> Boring. Strict. Predictable.

---

## Зачем nope

nope существует, чтобы:
- быстро поднимать сервисы без копипасты инфраструктуры;
- фиксировать единый стандарт поведения (ошибки, JSON, таймауты, shutdown);
- не мешать доменной логике и не навязывать архитектуру.

Это **не фреймворк‑платформа**, а аккуратный набор договорённостей и утилит.

---

## Ключевые идеи

- **Ошибка как продукт** — строгий JSON‑контракт, стабильные error codes, без утечек.
- **Handlers return data** — хендлеры возвращают `(payload, error)`, а не пишут HTTP вручную.
- **Context — коробка фактов** — request id, ip, params; не свалка бизнес‑данных.
- **Свoй минимальный роутинг** — контроль, предсказуемость, `Mount` для зон.
- **Strict JSON** — лимиты, понятные ошибки, одинаковое поведение.
- **Тонкая работа с БД** — pool, tx, классификация ошибок, без ORM.

Все детали зафиксированы в DESIGN.md и ROUTING.md.

---

## Что внутри (v0.1)

- `app` — запуск сервера, таймауты, graceful shutdown
- `router` — собственный простой роутер (static / :param / mount)
- `httpkit` — handler contract + middleware
- `errors` — единый error JSON контракт
- `json` — строгий decode/encode
- `dbkit` — pool, tx, классификация ошибок
- `spa` — static + history fallback (опционально)

---

## Быстрый старт (упрощённо)

```go
r := router.New()

r.GET("/healthz", httpkit.Adapt(healthHandler))
r.Mount("/api", apiRouter())

app.Run(":8080", r)
```

Хендлер:

```go
func healthHandler(ctx context.Context, r *http.Request) (any, error) {
    return map[string]string{"status": "ok"}, nil
}
```

Ошибки и JSON форматируются автоматически.

---

## Зоны (`/api`, `/admin`)

Зоны реализуются **только через `Mount`**:

- `/api` — публичное API
- `/admin` — отдельный router + строгие middleware
- версии (`/api/v1`) — отдельные sub‑router’ы

Без групп, без магии.

---

## Что nope не делает

- DI контейнеры
- ORM и универсальные репозитории
- кодогенерацию
- lifecycle‑платформу
- host / regex routing

Если вам нужен «большой фреймворк» — nope не для этого.

---

## Документация

- **DESIGN.md** — философия, киты, фичи и границы
- **ROUTING.md** — строгая спецификация роутинга

Эти документы — нормативные.

---

## Статус

Проект в активной разработке.

- текущая версия: `v0.x`
- публичный API может меняться
- цель: стабильный `v1.0` с замороженным контрактом

---

## Лицензия

MIT

---

> nope — когда ты хочешь писать сервисы, а не фреймворки.

